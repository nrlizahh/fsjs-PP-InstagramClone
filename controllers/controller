const { Post, PostTag, Profile, Tag, User} = require('../models')
const { Op } = require("sequelize")

class Controller {
    static async home (req, res){
        try {
            res.render('home')
        } catch (error) {
            res.send(error)
        }
    }
    
    static async profilePage(req, res){
        try {
            let data = await Profile.findAll()
            res.render('profile', {data})
        } catch (error) {
            res.send(error)
        }
    }

    // static async userPage (req, res){
    //     try {
    //         const {id} = req.params
    //         let data = await User.findByPk(id, {
    //             include: { 
    //                 model : Profile
    //             }
    //         })
    //         res.render('userPage', {data})
    //     } catch (error) {
    //         console.log(error);
            
    //         res.send(error)
    //     }
    // }

    static async renderUserEdit(req, res) {
        try {
            const { id } = req.params;
            let data = await User.findByPk(id, {
                include: { 
                    model : Profile
                }
            })
          res.render("userPage", { data });
        } catch (error) {
          res.send(error);
        }
      }
    
    static async handlerEditArts(req, res) {
    try {
        const { username, fullName, gender, biodata, location, photoProfile} = req.body;
        const { id } = req.params;
        await Art.update(
        { username, fullName, gender, biodata, location, photoProfile},
        {
            where: {
            id,
            },
        }
        );
        res.redirect("/profile");
    } catch (error) {
        res.send(error);
    }
    }

}

module.exports = Controller